{% extends "blog/base.html" %}

{% block main %}

{% load static %}

<h2>⭐︎ 会員ページ ⭐︎</h2>
<p>{{ user }}さん、こんにちは😊</p>

<p><a href="{% url 'logout' %}">ログアウト</a></p>
<p><a href="{% url 'password_change' %}">パスワードの変更</a></p>
<p>8000/adminで管理画面へ</p>
<p>ユーザー名　admin</p>
<p>パスワード　adgjm135</p>

<h2><p><a href="{% url 'blog:create' %}">⭐︎ 新規投稿 ⭐︎</a></p></h2>
<p>{{ user }}さんが今観ているドラマはなんですか？</p>
<p>感想などを投稿して会員同士で共有してみませんか？</p>

<h2>⭐︎ ブログ一覧 ⭐︎ </h2>

  <form class="form-inline my-2" method="GET" action="{% url 'blog:search' %}">
   <input type="text" class="form-control" name="query" value="{{request.GET.query}}">
   <button type="submit" class="btn btn-primary">検索</button>
  </form>


<ol>
    
    {% for post in object_list %}
    
    <li>
        <a href="{% url 'blog:detail' post.id %}">{{ post.title }}</a> <p>投稿者：{{ post.accessuser }}</p>

         <!--もしいいねしていたユーザーがログインユーザーだったら、いいねボタンを光らせる-->
         <!--これにより、リロードしたり再度ログイン時、いいねしたボタンは常に光る-->
        <button class='like-btn {%if request.user in post.like.all %}on{%endif%}'
                       data-href="{{ post.get_api_like_url }}" data-id="{{post.pk}}">
          <span class="liked-cnt" id="like{{post.pk}}">{{ post.like.count }}</span>
          <i class="fas fa-thumbs-up"></i>
        </button>
        
   </li>

   {% endfor %}

</ol>
   
<script type='text/javascript' src='{% static "like.js" %}'></script>
<link href="{% static 'fontawesome_free/css/all.min.css' %}" rel="stylesheet" type="text/css">
<style>
  button.like-btn{
    color: #999999;
    line-height:40px;
    background-color: transparent;
    border: none;
    outline: none;
  }
  button.on{
    color: #F75D5D;
  }
</style>

{% endblock %}
